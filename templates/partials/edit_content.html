<div class="container-fluid px-0">

  <div class="py-4 border-bottom">
    <h2 class="text-center fw-bold mb-0">
      Edit Post
    </h2>
  </div>

  <div class="container py-5">

    <form
      method="post"
      enctype="multipart/form-data"
      action="{% url 'update' article.id %}"
      hx-post="{% url 'update' article.id %}"
      hx-target="#main-content"
      hx-swap="innerHTML"
    >
      {% csrf_token %}

      <div class="mb-4">
        <label class="form-label fw-bold fs-5">
          Title
        </label>
        <input
          type="text"
          name="title"
          value="{{ article.title }}"
          class="form-control form-control-lg"
          required
        >
      </div>

      <div class="mb-4">
        <label class="form-label fw-bold fs-5">
          Content
        </label>
        <textarea
          name="content"
          rows="10"
          class="form-control"
          required
        >{{ article.content }}</textarea>
      </div>

      <div class="row mb-4">
        <div class="col-md-6">
          <label class="form-label fw-bold">
            Category
          </label>
          <select
            name="category"
            class="form-select"
            required
          >
            {% for c in categories %}
              <option
                value="{{ c.id }}"
                {% if article.category.id == c.id %}selected{% endif %}
              >
                {{ c.name }}
              </option>
            {% endfor %}
          </select>
        </div>

        <div class="col-md-6">
          <label class="form-label fw-bold">
            Change Image
          </label>
          <input
            type="file"
            name="image"
            class="form-control"
          >
        </div>
      </div>

      {% if article.image %}
        <div class="mb-4">
          <p class="fw-bold mb-2">
            Current Image
          </p>

          <img
            src="{{ article.image.url }}"
            class="img-fluid rounded mb-2"
            style="max-height: 300px;"
          >

          <div class="form-check mt-2">
            <input
              class="form-check-input"
              type="checkbox"
              name="remove_image"
              value="1"
              id="removeImage"
            >
            <label class="form-check-label" for="removeImage">
              Remove current image
            </label>
          </div>
        </div>
      {% endif %}

      <div class="d-flex justify-content-end gap-3 mt-5">
        <a
          href="{% url 'article_detail' article.id %}"
          hx-get="{% url 'article_detail' article.id %}"
          hx-target="#main-content"
          hx-push-url="true"
          class="btn btn-outline-dark"
        >
          Cancel
        </a>

        <button
          type="submit"
          class="btn btn-dark fw-bold px-4"
        >
          Save Changes
        </button>
      </div>

    </form>

  </div>
</div>
